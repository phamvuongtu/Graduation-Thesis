{"ast":null,"code":"import { encodeBase64, VSBuffer, decodeBase64 } from '../../../../base/common/buffer.js';\nimport { ResourceMap } from '../../../../base/common/map.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport '../../../../platform/instantiation/common/instantiation.js';\nconst _lengths = ['W', 'X', 'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f'];\nconst _padRegexp = new RegExp(`^[${_lengths.join('')}]+`);\nconst _radix = 7;\nfunction parse(cell) {\n  if (cell.scheme !== Schemas.vscodeNotebookCell) {\n    return undefined;\n  }\n  const idx = cell.fragment.indexOf('s');\n  if (idx < 0) {\n    return undefined;\n  }\n  const handle = parseInt(cell.fragment.substring(0, idx).replace(_padRegexp, ''), _radix);\n  const _scheme = decodeBase64(cell.fragment.substring(idx + 1)).toString();\n  if (isNaN(handle)) {\n    return undefined;\n  }\n  return {\n    handle,\n    notebook: cell.with({\n      scheme: _scheme,\n      fragment: null\n    })\n  };\n}\nfunction generate(notebook, handle) {\n  const s = handle.toString(_radix);\n  const p = s.length < _lengths.length ? _lengths[s.length - 1] : 'z';\n  const fragment = `${p}${s}s${encodeBase64(VSBuffer.fromString(notebook.scheme), true, true)}`;\n  return notebook.with({\n    scheme: Schemas.vscodeNotebookCell,\n    fragment\n  });\n}\nclass NotebookDocumentWorkbenchService {\n  constructor() {\n    this._documents = new ResourceMap();\n  }\n  getNotebook(uri) {\n    if (uri.scheme === Schemas.vscodeNotebookCell) {\n      const cellUri = parse(uri);\n      if (cellUri) {\n        const document = this._documents.get(cellUri.notebook);\n        if (document) {\n          return document;\n        }\n      }\n    }\n    return this._documents.get(uri);\n  }\n  addNotebookDocument(document) {\n    this._documents.set(document.uri, document);\n  }\n  removeNotebookDocument(document) {\n    this._documents.delete(document.uri);\n  }\n}\nexport { NotebookDocumentWorkbenchService, generate, parse };","map":{"version":3,"names":["encodeBase64","VSBuffer","decodeBase64","ResourceMap","Schemas","_lengths","_padRegexp","RegExp","join","_radix","parse","cell","scheme","vscodeNotebookCell","undefined","idx","fragment","indexOf","handle","parseInt","substring","replace","_scheme","toString","isNaN","notebook","with","generate","s","p","length","fromString","NotebookDocumentWorkbenchService","constructor","_documents","getNotebook","uri","cellUri","document","get","addNotebookDocument","set","removeNotebookDocument","delete"],"sources":["/Users/phamtu/Downloads/Code/OCE/oce-frontend/node_modules/vscode/vscode/src/vs/workbench/services/notebook/common/notebookDocumentService.js"],"sourcesContent":["import { encodeBase64, VSBuffer, decodeBase64 } from '../../../../base/common/buffer.js';\nimport { ResourceMap } from '../../../../base/common/map.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport '../../../../platform/instantiation/common/instantiation.js';\nconst _lengths = ['W', 'X', 'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f'];\nconst _padRegexp = ( new RegExp(`^[${_lengths.join('')}]+`));\nconst _radix = 7;\nfunction parse(cell) {\n    if (cell.scheme !== Schemas.vscodeNotebookCell) {\n        return undefined;\n    }\n    const idx = cell.fragment.indexOf('s');\n    if (idx < 0) {\n        return undefined;\n    }\n    const handle = parseInt(cell.fragment.substring(0, idx).replace(_padRegexp, ''), _radix);\n    const _scheme = ( decodeBase64(cell.fragment.substring(idx + 1)).toString());\n    if (isNaN(handle)) {\n        return undefined;\n    }\n    return {\n        handle,\n        notebook: cell.with({ scheme: _scheme, fragment: null })\n    };\n}\nfunction generate(notebook, handle) {\n    const s = ( handle.toString(_radix));\n    const p = s.length < _lengths.length ? _lengths[s.length - 1] : 'z';\n    const fragment = `${p}${s}s${encodeBase64(VSBuffer.fromString(notebook.scheme), true, true)}`;\n    return notebook.with({ scheme: Schemas.vscodeNotebookCell, fragment });\n}\nclass NotebookDocumentWorkbenchService {\n    constructor() {\n        this._documents = ( new ResourceMap());\n    }\n    getNotebook(uri) {\n        if (uri.scheme === Schemas.vscodeNotebookCell) {\n            const cellUri = parse(uri);\n            if (cellUri) {\n                const document = this._documents.get(cellUri.notebook);\n                if (document) {\n                    return document;\n                }\n            }\n        }\n        return this._documents.get(uri);\n    }\n    addNotebookDocument(document) {\n        this._documents.set(document.uri, document);\n    }\n    removeNotebookDocument(document) {\n        this._documents.delete(document.uri);\n    }\n}\nexport { NotebookDocumentWorkbenchService, generate, parse };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}