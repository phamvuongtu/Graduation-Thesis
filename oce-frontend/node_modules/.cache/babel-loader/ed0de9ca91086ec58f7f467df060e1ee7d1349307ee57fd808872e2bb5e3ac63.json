{"ast":null,"code":"import { CancellationTokenSource } from './cancellation.js';\nclass Cache {\n  constructor(task) {\n    this.task = task;\n    this.result = null;\n  }\n  get() {\n    if (this.result) {\n      return this.result;\n    }\n    const cts = new CancellationTokenSource();\n    const promise = this.task(cts.token);\n    this.result = {\n      promise,\n      dispose: () => {\n        this.result = null;\n        cts.cancel();\n        cts.dispose();\n      }\n    };\n    return this.result;\n  }\n}\nfunction identity(t) {\n  return t;\n}\nclass LRUCachedFunction {\n  constructor(arg1, arg2) {\n    this.lastCache = undefined;\n    this.lastArgKey = undefined;\n    if (typeof arg1 === 'function') {\n      this._fn = arg1;\n      this._computeKey = identity;\n    } else {\n      this._fn = arg2;\n      this._computeKey = arg1.getCacheKey;\n    }\n  }\n  get(arg) {\n    const key = this._computeKey(arg);\n    if (this.lastArgKey !== key) {\n      this.lastArgKey = key;\n      this.lastCache = this._fn(arg);\n    }\n    return this.lastCache;\n  }\n}\nclass CachedFunction {\n  get cachedValues() {\n    return this._map;\n  }\n  constructor(arg1, arg2) {\n    this._map = new Map();\n    this._map2 = new Map();\n    if (typeof arg1 === 'function') {\n      this._fn = arg1;\n      this._computeKey = identity;\n    } else {\n      this._fn = arg2;\n      this._computeKey = arg1.getCacheKey;\n    }\n  }\n  get(arg) {\n    const key = this._computeKey(arg);\n    if (this._map2.has(key)) {\n      return this._map2.get(key);\n    }\n    const value = this._fn(arg);\n    this._map.set(arg, value);\n    this._map2.set(key, value);\n    return value;\n  }\n}\nexport { Cache, CachedFunction, LRUCachedFunction, identity };","map":{"version":3,"names":["CancellationTokenSource","Cache","constructor","task","result","get","cts","promise","token","dispose","cancel","identity","t","LRUCachedFunction","arg1","arg2","lastCache","undefined","lastArgKey","_fn","_computeKey","getCacheKey","arg","key","CachedFunction","cachedValues","_map","Map","_map2","has","value","set"],"sources":["/Users/phamtu/Downloads/Code/OCE/oce-frontend/node_modules/vscode/vscode/src/vs/base/common/cache.js"],"sourcesContent":["import { CancellationTokenSource } from './cancellation.js';\nclass Cache {\n    constructor(task) {\n        this.task = task;\n        this.result = null;\n    }\n    get() {\n        if (this.result) {\n            return this.result;\n        }\n        const cts = ( new CancellationTokenSource());\n        const promise = this.task(cts.token);\n        this.result = {\n            promise,\n            dispose: () => {\n                this.result = null;\n                cts.cancel();\n                cts.dispose();\n            }\n        };\n        return this.result;\n    }\n}\nfunction identity(t) {\n    return t;\n}\nclass LRUCachedFunction {\n    constructor(arg1, arg2) {\n        this.lastCache = undefined;\n        this.lastArgKey = undefined;\n        if (typeof arg1 === 'function') {\n            this._fn = arg1;\n            this._computeKey = identity;\n        }\n        else {\n            this._fn = arg2;\n            this._computeKey = arg1.getCacheKey;\n        }\n    }\n    get(arg) {\n        const key = this._computeKey(arg);\n        if (this.lastArgKey !== key) {\n            this.lastArgKey = key;\n            this.lastCache = this._fn(arg);\n        }\n        return this.lastCache;\n    }\n}\nclass CachedFunction {\n    get cachedValues() {\n        return this._map;\n    }\n    constructor(arg1, arg2) {\n        this._map = ( new Map());\n        this._map2 = ( new Map());\n        if (typeof arg1 === 'function') {\n            this._fn = arg1;\n            this._computeKey = identity;\n        }\n        else {\n            this._fn = arg2;\n            this._computeKey = arg1.getCacheKey;\n        }\n    }\n    get(arg) {\n        const key = this._computeKey(arg);\n        if (( this._map2.has(key))) {\n            return this._map2.get(key);\n        }\n        const value = this._fn(arg);\n        this._map.set(arg, value);\n        this._map2.set(key, value);\n        return value;\n    }\n}\nexport { Cache, CachedFunction, LRUCachedFunction, identity };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}